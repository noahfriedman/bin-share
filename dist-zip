#! /bin/sh
# $Id: dist-zip,v 1.1 2002/07/04 03:47:00 friedman Exp $

for dir in ${1+"$@"} ; do
  # Protect against accidental trailing slash, i.e. if someone does
  # dist-tar foo/, don't create foo/.tar.gz only to delete foo
  # afterward.
  case "$dir" in
    */ ) dir=`echo "$dir" | sed -e 's=/$==g'` ;;
  esac

  echo "dist-tar: packing $dir.zip"

  { find "$dir" -print \
     | sort \
     | zip -9 -y -@ "$dir.zip"
  } && touch -r "$dir" "$dir.zip" \
    && rm -rf "$dir"
done

# eof
